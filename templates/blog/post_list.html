{% extends "blog/base.html" %}
{% load static %} {# Load static if needed within the block #}

{% block title %}Blog Posts - CodeCanvas{% endblock title %} {# Example of setting specific title #}

{% block content %}
    {# === Define the page structure HERE === #}
    <div class="page-wrapper">

        <aside class="sidebar">
            <nav class="recent-posts-nav">
                <h3>Recent Posts</h3>
                <ul>
                    {# Ensure 'posts' (recent posts) is passed to this view's context #}
                    {% for post in posts %}
                    <li><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></li>
                    {% empty %}
                    <li>No recent posts found.</li>
                    {% endfor %}
                </ul>
            </nav>
            <section class="about-section">
                <h3>About</h3>
                <p>Hi, I'm AK — a software engineer who builds and writes about full-stack systems and dev tools.</p>
            </section>
        </aside>

        <main class="main-content">
            <h2 class="page-title">Blog Posts</h2>
            {# Ensure 'post_list' context variable is passed to this view #}
            {% for post in post_list %}
            <article class="post-card">
                <h3><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
                <p class="meta">{{ post.created_date|date:"F d, Y" }}</p>
                <div class="post-excerpt">
                    {{ post.text|linebreaks|truncatewords:50 }}
                </div>
                <a href="{{ post.get_absolute_url }}" class="read-more">Read More →</a>
            </article>
            {% empty %}
                <p>No posts have been published yet.</p>
            {% endfor %}
            <a href="{% url 'post_new' %}" class="btn btn-hero">Start Writing</a>
        </main>

    </div>
    {# === End Page Structure Definition === #}
{% endblock content %}